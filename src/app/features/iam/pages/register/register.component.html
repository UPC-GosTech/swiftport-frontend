<div class="register-wrapper">

  <div class="register-container">
    <h1>SwiftPort</h1>
    <p>{{ 'register-container.slogan' | translate }}</p>

    <form (ngSubmit)="onRegister()" #registerForm="ngForm" novalidate>
      
      <!-- SecciÃ³n de Datos de la Empresa -->
      <h3>{{ 'register-container.company-data' | translate }}</h3>
      
      <label for="ruc">{{ 'register-container.ruc' | translate }} *</label>
      <input
        type="text"
        id="ruc"
        [placeholder]="'register-container.ruc' | translate"
        name="ruc"
        [(ngModel)]="ruc"
        required
        #rucInput="ngModel"
        [class.invalid-input]="rucInput.invalid && (rucInput.touched || submitted)"
      />
      @if (rucInput.errors?.['required'] && (rucInput.touched || submitted)) {
        <small class="error-msg">
          {{ 'register-container.ruc-required' | translate }}
        </small>
      }

      <label for="legalName">{{ 'register-container.legal-name' | translate }} *</label>
      <input
        type="text"
        id="legalName"
        [placeholder]="'register-container.legal-name' | translate"
        name="legalName"
        [(ngModel)]="legalName"
        required
        #legalNameInput="ngModel"
        [class.invalid-input]="legalNameInput.invalid && (legalNameInput.touched || submitted)"
      />
      @if (legalNameInput.errors?.['required'] && (legalNameInput.touched || submitted)) {
        <small class="error-msg">
          {{ 'register-container.legal-name-required' | translate }}
        </small>
      }

      <label for="commercialName">{{ 'register-container.commercial-name' | translate }}</label>
      <input
        type="text"
        id="commercialName"
        [placeholder]="'register-container.commercial-name' | translate"
        name="commercialName"
        [(ngModel)]="commercialName"
        #commercialNameInput="ngModel"
      />

      <label for="address">{{ 'register-container.address' | translate }}</label>
      <input
        type="text"
        id="address"
        [placeholder]="'register-container.address' | translate"
        name="address"
        [(ngModel)]="address"
        #addressInput="ngModel"
      />

      <div class="form-row">
        <div class="form-group">
          <label for="city">{{ 'register-container.city' | translate }}</label>
          <input
            type="text"
            id="city"
            [placeholder]="'register-container.city' | translate"
            name="city"
            [(ngModel)]="city"
            #cityInput="ngModel"
          />
        </div>
        <div class="form-group">
          <label for="country">{{ 'register-container.country' | translate }}</label>
          <input
            type="text"
            id="country"
            [placeholder]="'register-container.country' | translate"
            name="country"
            [(ngModel)]="country"
            #countryInput="ngModel"
          />
        </div>
      </div>

      <label for="tenantPhone">{{ 'register-container.phone' | translate }}</label>
      <input
        type="tel"
        id="tenantPhone"
        [placeholder]="'register-container.phone' | translate"
        name="tenantPhone"
        [(ngModel)]="tenantPhone"
        #tenantPhoneInput="ngModel"
      />

      <label for="tenantEmail">{{ 'register-container.company-email' | translate }}</label>
      <input
        type="email"
        id="tenantEmail"
        [placeholder]="'register-container.company-email' | translate"
        name="tenantEmail"
        [(ngModel)]="tenantEmail"
        email
        #tenantEmailInput="ngModel"
      />

      <label for="website">{{ 'register-container.website' | translate }}</label>
      <input
        type="url"
        id="website"
        [placeholder]="'register-container.website' | translate"
        name="website"
        [(ngModel)]="website"
        #websiteInput="ngModel"
      />

      <!-- SecciÃ³n de Datos del Usuario -->
      <h3>{{ 'register-container.user-data' | translate }}</h3>

      <div class="form-row">
        <div class="form-group">
          <label for="firstName">{{ 'register-container.first-name' | translate }} *</label>
          <input
            type="text"
            id="firstName"
            [placeholder]="'register-container.first-name' | translate"
            name="firstName"
            [(ngModel)]="firstName"
            required
            #firstNameInput="ngModel"
            [class.invalid-input]="firstNameInput.invalid && (firstNameInput.touched || submitted)"
          />
          @if (firstNameInput.errors?.['required'] && (firstNameInput.touched || submitted)) {
            <small class="error-msg">
              {{ 'register-container.first-name-required' | translate }}
            </small>
          }
        </div>
        <div class="form-group">
          <label for="lastName">{{ 'register-container.last-name' | translate }} *</label>
          <input
            type="text"
            id="lastName"
            [placeholder]="'register-container.last-name' | translate"
            name="lastName"
            [(ngModel)]="lastName"
            required
            #lastNameInput="ngModel"
            [class.invalid-input]="lastNameInput.invalid && (lastNameInput.touched || submitted)"
          />
          @if (lastNameInput.errors?.['required'] && (lastNameInput.touched || submitted)) {
            <small class="error-msg">
              {{ 'register-container.last-name-required' | translate }}
            </small>
          }
        </div>
      </div>

      <label for="username">{{ 'register-container.username' | translate }} *</label>
      <input
        type="text"
        id="username"
        [placeholder]="'register-container.username' | translate"
        name="username"
        [(ngModel)]="username"
        required
        #usernameInput="ngModel"
        [class.invalid-input]="usernameInput.invalid && (usernameInput.touched || submitted)"
      />
      @if (usernameInput.errors?.['required'] && (usernameInput.touched || submitted)) {
        <small class="error-msg">
          {{ 'register-container.username-required' | translate }}
        </small>
      }

      <label for="email">{{ 'register-container.email' | translate }} *</label>
      <input
        type="email"
        id="email"
        [placeholder]="'register-container.email' | translate"
        name="email"
        [(ngModel)]="email"
        required
        email
        #emailInput="ngModel"
        [class.invalid-input]="emailInput.invalid && (emailInput.touched || submitted)"
      />
      @if (emailInput.errors?.['required'] && (emailInput.touched || submitted)) {
        <small class="error-msg">
          {{ 'register-container.email-required' | translate }}
        </small>
      }
      @if (emailInput.errors?.['email'] && (emailInput.touched || submitted)) {
        <small class="error-msg">
          {{ 'register-container.email-invalid' | translate }}
        </small>
      }

      <label for="password">{{ 'register-container.password' | translate }} *</label>
      <input
        type="password"
        id="password"
        name="password"
        [placeholder]="'register-container.password' | translate"
        [(ngModel)]="password"
        required
        minlength="6"
        #passwordInput="ngModel"
        [class.invalid-input]="passwordInput.invalid && (passwordInput.touched || submitted)"
      />
      @if (passwordInput.errors?.['required'] && (passwordInput.touched || submitted)) {
        <small class="error-msg">
          {{ 'register-container.password-required' | translate }}
        </small>
      }
      @if (passwordInput.errors?.['minlength'] && (passwordInput.touched || submitted)) {
        <small class="error-msg">
          {{ 'register-container.password-min' | translate }}
        </small>
      }

      <label for="repeatPassword">{{ 'register-container.password-repeat' | translate }} *</label>
      <input
        type="password"
        id="repeatPassword"
        name="repeatPassword"
        [placeholder]="'register-container.password-repeat' | translate"
        [(ngModel)]="repeatPassword"
        required
        #repeatPasswordInput="ngModel"
        [class.invalid-input]="repeatPasswordInput.invalid && (repeatPasswordInput.touched || submitted)"
      />
      @if (repeatPasswordInput.errors?.['required'] && (repeatPasswordInput.touched || submitted)) {
        <small class="error-msg">
          {{ 'register-container.password-repeat-required' | translate }}
        </small>
      }
      @if (password !== repeatPassword && repeatPasswordInput.touched) {
        <small class="error-msg">
          {{ 'register-container.password-mismatch' | translate }}
        </small>
      }

      @if (errorMessage) {
        <div class="error-msg">
          {{ errorMessage | translate }}
        </div>
      }

      <button type="submit" class="register-btn" [disabled]="isLoading || registerForm.invalid">
        @if (!isLoading) {
          <span>ğŸ“ {{ 'register-container.register' | translate }}</span>
        }
        @if (isLoading) {
          <span>{{ 'register-container.registering' | translate }}</span>
        }
      </button>

      <a class="login-link" (click)="goToLogin()">
        ğŸ” {{ 'register-container.login' | translate }}
      </a>
    </form>
  </div>
</div>
